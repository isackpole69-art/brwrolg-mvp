<!DOCTYPE html>
<html lang="en">
<head>
    <title>BrewLog MVP</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f1ea; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); max-width: 400px; }
        input, select, button { display: block; width: 100%; margin: 10px 0; padding: 10px; }
        button { background: #6f4e37; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <div class="card">
        <h2>☕ New Coffee Log</h2>
        <input type="text" id="beanName" placeholder="Bean Name (e.g. Ethiopia Yirgacheffe)">
        <select id="method">
            <option value="v60">V60</option>
            <option value="french-press">French Press</option>
            <option value="espresso">Espresso</option>
        </select>
        <button onclick="saveLog()">Save Brew</button>
    </div>

    <script>
        
    // 1. Load existing logs from memory when the page opens
    window.onload = function() {
        displayLogs();
    };

    function saveLog() {
        const name = document.getElementById('beanName').value;
        const method = document.getElementById('method').value;
        const rating = document.getElementById('rating').value;

        if(!name || !rating) return alert("Please fill in all fields");

        const newLog = { name, method, rating, date: new Date().toLocaleDateString() };

        // 2. Get existing logs from LocalStorage, add new one, and save back
        const logs = JSON.parse(localStorage.getItem('coffeeLogs')) || [];
        logs.push(newLog);
        localStorage.setItem('coffeeLogs', JSON.stringify(logs));

        // 3. Update the UI and clear inputs
        displayLogs();
        document.getElementById('beanName').value = '';
        document.getElementById('rating').value = '';
    }

    function displayLogs() {
        const list = document.getElementById('logList');
        const logs = JSON.parse(localStorage.getItem('coffeeLogs')) || [];
        
        // Clear current list and rebuild it from saved data
        list.innerHTML = ''; 
        logs.reverse().forEach(log => {
            const item = document.createElement('div');
            item.className = 'log-item';
            item.innerHTML = `
                <span><strong>${log.name}</strong> (${log.method}) <br><small>${log.date}</small></span> 
                <span class="rating">${'★'.repeat(log.rating)}</span>
            `;
            list.appendChild(item);
        });
    }

    </script>
</body>
</html>